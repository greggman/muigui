!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n="undefined"!=typeof globalThis?globalThis:n||self).GUI=e()}(this,(function(){"use strict";function n(n,e={},t=[]){const i=document.createElement(n);return function(n,e,t){for(const[t,i]of Object.entries(e))if("function"==typeof i&&t.startsWith("on")){const e=t.substring(2).toLowerCase();n.addEventListener(e,i,{passive:!1})}else if("object"==typeof i)for(const[e,o]of Object.entries(i))n[t][e]=o;else void 0===n[t]?n.setAttribute(t,i):n[t]=i;for(const e of t)n.appendChild(e)}(i,e,t),i}function e(n,e){const t=n.indexOf(e);return t&&n.splice(t,1),n}function t(n,e,t){return Math.max(e,Math.min(t,n))}const i="undefined"!=typeof SharedArrayBuffer?function(n){return n&&n.buffer&&(n.buffer instanceof ArrayBuffer||n.buffer instanceof SharedArrayBuffer)}:function(n){return n&&n.buffer&&n.buffer instanceof ArrayBuffer},o=(n,e,t)=>Math.round(e(n)/t)/(1/t);function r(n,e){for(const t in e)t in n&&(n[t]=e[t]);return n}class s{#n;#e=[];constructor(n){this.domElement=n,this.#n=n}addElem(n){return this.#n.appendChild(n),n}removeElem(n){return this.#n.removeChild(n),n}pushSubElem(n){this.#n.appendChild(n),this.#n=n}popSubElem(){this.#n=this.#n.parentElement}add(n){return this.#e.push(n),this.addElem(n.domElement),n}remove(n){return this.removeElem(n.domElement),e(this.#e,n),n}pushSubView(n){this.pushSubElem(n.domElement)}popSubView(){this.popSubElem()}setOptions(n){for(const e of this.#e)e.setOptions(n)}updateDisplayIfNeeded(n,e){for(const t of this.#e)t.updateDisplayIfNeeded(n,e);return this}$(n){return this.domElement.querySelector(n)}}class a extends s{#t;#i;#o;constructor(e){super(n("div",{className:"muigui-controller"})),this.#t=[],this.#i=[],e&&this.domElement.classList.add(e)}get parent(){return this.#o}setParent(n){this.#o=n,this.enable(!this.disabled())}show(n=!0){return this.domElement.classList.toggle("muigui-hide",!n),this.domElement.classList.toggle("muigui-show",n),this}hide(){return this.show(!1)}disabled(){return!!this.domElement.closest(".muigui-disabled")}enable(n=!0){return this.domElement.classList.toggle("muigui-disabled",!n),["input","button","select","textarea"].forEach((n=>{this.domElement.querySelectorAll(n).forEach((n=>{const e=!!n.closest(".muigui-disabled");n.disabled=e}))})),this}disable(n=!0){return this.enable(!n)}onChange(n){return this.removeChange(n),this.#t.push(n),this}removeChange(n){return e(this.#t,n),this}onFinishChange(n){return this.removeFinishChange(n),this.#i.push(n),this}removeFinishChange(n){return e(this.#i,n),this}#r(n,e){for(const t of n)t.call(this,e)}emitChange(n,e,t){this.#r(this.#t,n),this.#o&&(void 0===e?this.#o.emitChange(n):this.#o.emitChange({object:e,property:t,value:n,controller:this}))}emitFinalChange(n,e,t){this.#r(this.#i,n),this.#o&&(void 0===e?this.#o.emitChange(n):this.#o.emitFinalChange({object:e,property:t,value:n,controller:this}))}getColors(){const e=n=>n.replace(/-([a-z])/g,((n,e)=>e.toUpperCase())),t=n("div");this.domElement.appendChild(t);const i=Object.fromEntries(["color","bg-color","value-color","value-bg-color","hover-bg-color","menu-bg-color","menu-sep-color","disabled-color"].map((n=>{t.style.color=`var(--${n})`;const i=getComputedStyle(t);return[e(n),i.color]})));return t.remove(),i}}class l extends a{#s;#a;#l;#u={name:""};constructor(e,t,i={}){super("muigui-button",""),this.#s=e,this.#a=t,this.#l=this.addElem(n("button",{type:"button",onClick:()=>{this.#s[this.#a](this)}})),this.setOptions({name:t,...i})}setOptions(n){r(this.#u,n);const{name:e}=this.#u;this.#l.textContent=e}}function u(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0}class c extends s{#c;#h;#d(n){const e=!u(n,this.#c);return e&&function(n,e){e.length=n.length;for(let t=0;t<n.length;++t)e[t]=n[t]}(n,this.#c),e}#p(){let n=!0;return function(e){let t=n;return n=!1,t||(t=!u(e,this.#c)),t}}#m(n){let e=!1;for(const t in n)n[t]!==this.#c[t]&&(e=!0,this.#c[t]=n[t]);return e}#g(n){const e=n!==this.#c;return this.#c=n,e}#b(n){return Array.isArray(n)?(this.#c=[],this.#d.bind(this)):i(n)?(this.#c=new n.constructor(n),this.#p(this)):"object"==typeof n?(this.#c={},this.#m.bind(this)):this.#g.bind(this)}updateDisplayIfNeeded(n,e){this.#h=this.#h||this.#b(n),(this.#h(n)||e)&&this.updateDisplay(n)}setOptions(){return this}}class h extends c{constructor(e,t){const i=n("input",{type:"checkbox",id:t,onInput:()=>{e.setValue(this.domElement.checked)},onChange:()=>{e.setFinalValue(this.domElement.checked)}});super(n("label",{},[i]))}updateDisplay(n){this.domElement.checked=n}}const d=[],p=new Set;let m,g;function b(){m=void 0,g=!0;for(const n of d)p.has(n)||n();g=!1,p.size&&(g?f():(p.forEach((n=>{e(d,n)})),p.clear())),f()}function f(){!m&&d.length&&(m=requestAnimationFrame(b))}let v=0;class x extends s{constructor(e=""){super(n("div",{className:"muigui-value"})),e&&this.domElement.classList.add(e)}}class y extends a{#f;#v;constructor(e="",t=""){super("muigui-label-controller"),this.#f="muigui-"+ ++v,this.#v=n("label",{for:this.#f}),this.domElement.appendChild(this.#v),this.pushSubView(new x(e)),this.name(t)}get id(){return this.#f}name(n){return this.#v.title===this.#v.textContent&&(this.#v.title=n),this.#v.textContent=n,this}tooltip(n){this.#v.title=n}}class w extends y{#s;#a;#x;#y;#e;#w;constructor(n,e,t=""){super(t,e),this.#s=n,this.#a=e,this.#x=this.getValue(),this.#y=!1,this.#e=[]}get initialValue(){return this.#x}get object(){return this.#s}get property(){return this.#a}add(n){return this.#e.push(n),super.add(n),this.updateDisplay(),n}#k(n,e){if("object"==typeof n){const e=this.#s[this.#a];if(Array.isArray(n))for(let t=0;t<n.length;++t)e[t]=n[t];else i(n)?e.set(n):Object.assign(e,n)}else this.#s[this.#a]=n;return this.updateDisplay(e),this.emitChange(this.getValue(),this.#s,this.#a),this}setValue(n){this.#k(n)}setFinalValue(n){return this.#k(n,!0),this.emitFinalChange(this.getValue(),this.#s,this.#a),this}updateDisplay(n){const e=this.getValue();for(const t of this.#e)t.updateDisplayIfNeeded(e,n);return this}setOptions(n){for(const e of this.#e)e.setOptions(n);return this.updateDisplay(),this}getValue(){return this.#s[this.#a]}value(n){return this.setValue(n),this}reset(){return this.setValue(this.#x),this}listen(n=!0){var e;return this.#w||(this.#w=this.updateDisplay.bind(this)),n?this.#y||(this.#y=!0,e=this.#w,d.push(e),f()):this.#y&&(this.#y=!1,function(n){p.set(n);const e=d.indexOf(n);e>=0&&d.splice(e,1)}(this.#w)),this}}class k extends w{constructor(n,e){super(n,e,"muigui-checkbox");const t=this.id;this.add(new h(this,t)),this.updateDisplay()}}const E={to:n=>n,from:n=>[!0,n]},C={to:n=>n.toString(),from:n=>{const e=parseFloat(n);return[!Number.isNaN(e),e]}};function V(){let n=0;return function(e,t,i=5){n-=e.deltaY*t/i;const o=Math.floor(Math.abs(n)/t)*Math.sign(n)*t;return n-=o,o}}class F extends c{#E;#C;#V;#F;#u={step:.01,converters:C,min:Number.NEGATIVE_INFINITY,max:Number.POSITIVE_INFINITY};constructor(e,i){const r=e.setValue.bind(e),s=e.setFinalValue.bind(e),a=V();super(n("input",{type:"number",onInput:()=>this.#I(r,!0),onChange:()=>this.#I(s,!1),onWheel:n=>{n.preventDefault();const{min:i,max:r,step:s}=this.#u,l=a(n,s),u=parseFloat(this.domElement.value),c=t(o(u+l,(n=>n),s),i,r);e.setValue(c)}})),this.setOptions(i)}#I(n,e){const i=parseFloat(this.domElement.value),[o,r]=this.#C(i);let s;if(o&&!Number.isNaN(i)){const{min:i,max:o}=this.#u;s=r>=i&&r<=o,this.#F=e,n(t(r,i,o))}this.domElement.classList.toggle("muigui-invalid-value",!o||!s)}updateDisplay(n){this.#F||(this.domElement.value=o(n,this.#E,this.#V)),this.#F=!1}setOptions(n){r(this.#u,n);const{step:e,converters:{to:t,from:i}}=this.#u;return this.#E=t,this.#C=i,this.#V=e,this}}class I extends w{#N;#V;constructor(n,e,t={}){super(n,e,"muigui-checkbox"),this.#N=this.add(new F(this,t)),this.updateDisplay()}}class N extends c{#$;constructor(e,t){const i=[];super(n("select",{onChange:()=>{e.setFinalValue(this.#$[this.domElement.selectedIndex])}},t.map((([e,t])=>(i.push(t),n("option",{textContent:e})))))),this.#$=i}updateDisplay(n){const e=this.#$.indexOf(n);this.domElement.selectedIndex=e}}class $ extends w{constructor(n,e,t){super(n,e,"muigui-select");const i="number"==typeof this.getValue(),{keyValues:o}=t,r=function(n,e){return Array.isArray(n)?Array.isArray(n[0])?n:e?n.map(((n,e)=>[n,e])):n.map((n=>[n,n])):[...Object.entries(n)]}(o,i);this.add(new N(this,r)),this.updateDisplay()}}class D extends c{#E;#C;#V;#F;#u={step:.01,min:0,max:1,converters:E};constructor(e,i){const r=V();super(n("input",{type:"range",onInput:()=>{this.#F=!0;const[n,t]=this.#C(parseFloat(this.domElement.value));n&&e.setValue(t)},onChange:()=>{this.#F=!0;const[n,t]=this.#C(parseFloat(this.domElement.value));n&&e.setFinalValue(t)},onWheel:n=>{n.preventDefault();const[i,s]=this.#C(parseFloat(this.domElement.value));if(!i)return;const{min:a,max:l,step:u}=this.#u,c=r(n,u),h=t(o(s+c,(n=>n),u),a,l);e.setValue(h)}})),this.setOptions(i)}updateDisplay(n){this.#F||(this.domElement.value=o(n,this.#E,this.#V)),this.#F=!1}setOptions(n){r(this.#u,n);const{step:e,min:t,max:i,converters:{to:o,from:s}}=this.#u;return this.#E=o,this.#C=s,this.#V=e,this.domElement.step=e,this.domElement.min=t,this.domElement.max=i,this}}class O extends w{constructor(n,e,t){super(n,e,"muigui-range"),this.add(new D(this,t)),this.add(new F(this,t))}}class j extends c{#E;#C;#F;#u={converters:E};constructor(e,t){const i=e.setValue.bind(e),o=e.setFinalValue.bind(e);super(n("input",{type:"text",onInput:()=>this.#I(i,!0),onChange:()=>this.#I(o,!1)})),this.setOptions(t)}#I(n,e){const[t,i]=this.#C(this.domElement.value);t&&(this.#F=e,n(i)),this.domElement.style.color=t?"":"var(--invalid-color)"}updateDisplay(n){this.#F||(this.domElement.value=this.#E(n),this.domElement.style.color=""),this.#F=!1}setOptions(n){r(this.#u,n);const{converters:{to:e,from:t}}=this.#u;return this.#E=e,this.#C=t,this}}class S extends w{constructor(n,e){super(n,e,"muigui-checkbox"),this.add(new j(this)),this.updateDisplay()}}class A extends s{constructor(e,t){super(n(e,{className:t}))}}class U extends y{#D;constructor(){super("muigui-canvas"),this.#D=this.add(new A("canvas","muigui-canvas")).domElement}get canvas(){return this.#D}}const M=(n,e,t)=>Math.max(e,Math.min(t,n)),L=n=>+n.toFixed(3),z=n=>parseInt(n.substring(1,3),16)<<16|parseInt(n.substring(3,5),16)<<8|parseInt(n.substring(5,7),16),T=n=>[parseInt(n.substring(1,3),16),parseInt(n.substring(3,5),16),parseInt(n.substring(5,7),16)],P=n=>`#${Array.from(n).map((n=>n.toString(16).padStart(2,"0"))).join("")}`,B=n=>T(n).map((n=>L(n/255))),Y=n=>({r:parseInt(n.substring(1,3),16)/255,g:parseInt(n.substring(3,5),16)/255,b:parseInt(n.substring(5,7),16)/255}),_=n=>M(Math.round(255*n),0,255).toString(16).padStart(2,"0"),q=n=>`rgb(${T(n).join(", ")})`,G=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/,W=n=>{const e=J(T(n)).map((n=>(n=>+n.toFixed(0))(n)));return`hsl(${e[0]}, ${e[1]}%, ${e[2]}%)`},H=/^\s*hsl\(\s*(\d+)(?:deg|)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)\s*$/,R=(n,e)=>(n%e+e)%e;const J=n=>{const[e,t,i]=function([n,e,t]){const i=Math.max(n,e,t),o=Math.min(n,e,t),r=.5*(o+i),s=i-o;let a=0,l=0;if(0!==s)switch(l=0===r||1===r?0:(i-r)/Math.min(r,1-r),i){case n:a=(e-t)/s+(e<t?6:0);break;case e:a=(t-n)/s+2;break;case t:a=(n-e)/s+4}return[a/6,l,r]}(n.map((n=>n/255)));return[360*e,100*t,100*i]};const K=n=>Math.round(1e3*n)/1e3;window.hsv01ToRGBFloat=function([n,e,t]){return e=M(e,0,1),t=M(t,0,1),[n,n+2/3,n+1/3].map((n=>{return i=1,o=M(Math.abs(6*(n=>n>=0?n%1:1-n%1)(n)-3)-1,0,1),(i+(o-i)*e)*t;var i,o}))},window.rgbFloatToHSV01=function([n,e,t]){const i=t>e?[t,e,-1,2/3]:[e,t,0,-1/3],o=i[0]>n?[i[0],i[1],i[3],n]:[n,i[1],i[2],i[0]],r=o[0]-Math.min(o[3],o[1]);return[Math.abs(o[2]+(o[3]-o[1])/(6*r+Number.EPSILON)),r/(o[0]+Number.EPSILON),o[0]].map(K)};const Q=[{re:/^#(?:[0-9a-f]){6}$/i,format:"hex6"},{re:/^(?:[0-9a-f]){6}$/i,format:"hex6-no-hash"},{re:/^#(?:[0-9a-f]){3}$/i,format:"hex3"},{re:/^(?:[0-9a-f]){3}$/i,format:"hex3-no-hash"},{re:G,format:"css-rgb"},{re:H,format:"css-hsl"}];function X(n){switch(typeof n){case"number":return"uint32-rgb";case"string":{const e=function(n){for(const e of Q)if(e.re.test(n))return e}(n.trim());if(e)return e.format;break}case"object":if(n instanceof Uint8Array||n instanceof Uint8ClampedArray){if(3===n.length)return"uint8-rgb"}else if(n instanceof Float32Array){if(3===n.length)return"float-rgb"}else if(Array.isArray(n)){if(3===n.length)return"float-rgb"}else if("r"in n&&"g"in n&&"b"in n)return"object-rgb"}throw new Error(`unknown color format: ${n}`)}function Z(n){return n.trim(n)}function nn(n){return n[1]===n[2]&&n[3]===n[4]&&n[5]===n[6]?`#${n[1]}${n[3]}${n[5]}`:n}const en=/^(#|)([0-9a-f]{3})$/i;function tn(n){const e=en.exec(n);if(e){const[,,n]=e;return"#"+`${(t=n)[0]}${t[0]}${t[1]}${t[1]}${t[2]}${t[2]}`}var t;return n}function on(n){return nn(Z(n))}const rn=n=>{const e=G.exec(n);if(!e)return[!1];const t=[e[1],e[2],e[3]].map((n=>parseInt(n)));return[!t.find((n=>n>255)),`rgb(${t.join(", ")})`]},sn=n=>{const e=H.exec(n);if(!e)return[!1];const t=[e[1],e[2],e[3]].map((n=>parseFloat(n)));return[!t.find((n=>Number.isNaN(n))),`hsl(${t[0]}, ${t[1]}%, ${t[2]}%)`]},an=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*$/,ln=/^\s*(?:0x){0,1}([0-9a-z]{1,6})\s*$/i,un=/^\s*#[a-f0-9]{6}\s*$|^\s*#[a-f0-9]{3}\s*$/i,cn=/^\s*[a-f0-9]{6}\s*$/i,hn={hex6:{color:{from:n=>[!0,n],to:Z},text:{from:n=>[un.test(n),n.trim()],to:n=>n}},hex3:{color:{from:n=>[!0,on(n)],to:tn},text:{from:n=>[un.test(n),nn(n.trim())],to:n=>n}},"hex6-no-hash":{color:{from:n=>[!0,n.substring(1)],to:n=>`#${Z(n)}`},text:{from:n=>[cn.test(n),n.trim()],to:n=>n}},"hex3-no-hash":{color:{from:n=>[!0,on(n).substring(1)],to:tn},text:{from:n=>[cn.test(n),nn(n.trim())],to:n=>n}},"uint32-rgb":{color:{from:n=>[!0,z(n)],to:n=>`#${Math.round(n).toString(16).padStart(6,"0")}`},text:{from:n=>(n=>{const e=ln.exec(n);return e?[!0,parseInt(e[1],16)]:[!1]})(n),to:n=>`0x${n.toString(16).padStart(6,"0")}`}},"uint8-rgb":{color:{from:n=>[!0,T(n)],to:P},text:{from:n=>{const e=an.exec(n);if(!e)return[!1];const t=[e[1],e[2],e[3]].map((n=>parseInt(n)));return[!t.find((n=>n>255)),t]},to:n=>n.join(", ")}},"float-rgb":{color:{from:n=>[!0,B(n)],to:n=>P(Array.from(n).map((n=>Math.round(M(255*n,0,255)))))},text:{from:n=>{const e=n.split(",").map((n=>n.trim())),t=e.map((n=>parseFloat(n)));if(3!==t.length)return[!1];const i=e.findIndex((n=>isNaN(n)));return[i<0,t.map((n=>L(n)))]},to:n=>Array.from(n).map((n=>L(n))).join(", ")}},"object-rgb":{color:{from:n=>[!0,Y(n)],to:n=>`#${_(n.r)}${_(n.g)}${_(n.b)}`},text:{from:n=>{try{const e=n.replace(/([a-z])/g,'"$1"'),t=JSON.parse(e);if(Number.isNaN(t.r)||Number.isNaN(t.g)||Number.isNaN(t.b))throw new Error("not {r, g, b}");return[!0,t]}catch(n){return[!1]}},to:n=>`{r:${L(n.r)}, g:${L(n.g)}, b:${L(n.b)}}`}},"css-rgb":{color:{from:n=>[!0,q(n)],to:n=>{const e=G.exec(n);return P([e[1],e[2],e[3]].map((n=>parseInt(n))))}},text:{from:rn,to:n=>rn(n)[1]}},"css-hsl":{color:{from:n=>[!0,W(n)],to:n=>{const e=H.exec(n),t=function([n,e,t]){n=R(n,360),e=M(e/100,0,1),t=M(t/100,0,1);const i=e*Math.min(t,1-t);function o(e){const o=(e+n/30)%12;return t-i*Math.max(-1,Math.min(o-3,9-o,1))}return[o(0),o(8),o(4)].map((n=>Math.round(255*n)))}([e[1],e[2],e[3]].map((n=>parseFloat(n))));return P(t)}},text:{from:sn,to:n=>sn(n)[1]}}};class dn extends c{#E;#C;#O;#F;#u={converters:E};constructor(e,t){const i=n("input",{type:"color",onInput:()=>{const[n,t]=this.#C(i.value);n&&(this.#F=!0,e.setValue(t))},onChange:()=>{const[n,t]=this.#C(i.value);n&&(this.#F=!0,e.setFinalValue(t))}});super(n("div",{},[i])),this.setOptions(t),this.#O=i}updateDisplay(n){this.#F||(this.#O.value=this.#E(n)),this.#F=!1}setOptions(n){r(this.#u,n);const{converters:{to:e,from:t}}=this.#u;return this.#E=e,this.#C=t,this}}class pn extends w{#j;#N;constructor(n,e,t={}){super(n,e,"muigui-color");const i=t.format||X(this.getValue()),{color:o,text:r}=hn[i];this.#j=this.add(new dn(this,{converters:o})),this.#N=this.add(new j(this,{converters:r})),this.updateDisplay()}setOptions(n){const{format:e}=n;if(e){const{color:n,text:t}=hn[e];this.#j.setOptions({converters:n}),this.#N.setOptions({converters:t})}return super.setOptions(n),this}}class mn extends a{constructor(){super("muigui-divider")}}class gn extends a{#S;#A;constructor(n){super(n),this.#S=[],this.#A=this}get children(){return this.#S}get controllers(){return this.#S.filter((n=>!(n instanceof gn)))}get folders(){return this.#S.filter((n=>n instanceof gn))}reset(n=!0){for(const e of this.#S)e instanceof gn&&!n||e.reset(n);return this}remove(n){const e=this.#S.indexOf(n);if(e>=0){const n=this.#S.splice(e,1)[0];n.domElement.remove(),n.setParent(null)}return this}_addControllerImpl(n){return this.domElement.appendChild(n.domElement),this.#S.push(n),n.setParent(this),n}addController(n){return this.#A._addControllerImpl(n)}pushContainer(n){return this.addController(n),this.#A=n,n}popContainer(){return this.#A=this.#A.parent,this}}class bn extends gn{#U;constructor(e="Controls",t="muigui-menu"){super(t),this.#U=n("label"),this.addElem(n("button",{type:"button",onClick:()=>this.toggleOpen()},[this.#U])),this.pushContainer(new gn),this.name(e),this.open()}open(n=!0){return this.domElement.classList.toggle("muigui-closed",!n),this.domElement.classList.toggle("muigui-open",n),this}close(){return this.open(!1)}name(n){return this.#U.textContent=n,this}title(n){return this.name(n)}toggleOpen(){return this.open(!this.domElement.classList.contains("muigui-open")),this}}class fn extends a{constructor(n){super("muigui-label"),this.text(n)}text(n){return this.domElement.textContent=n,this}}let vn=!1;const xn=n("style");class yn extends bn{add(n,e,...t){const i=n instanceof a?n:function(n,e,...t){const[i]=t;if(Array.isArray(i))return new $(n,e,{keyValues:i});const o=typeof n[e];switch(o){case"number":if("number"==typeof t[0]&&"number"==typeof t[1]){const i=t[0],o=t[1],r=t[2];return new O(n,e,{min:i,max:o,...r&&{step:r}})}return 0===t.length?new I(n,e,...t):new O(n,e,...t);case"boolean":return new k(n,e,...t);case"function":return new l(n,e,...t);case"string":return new S(n,e,...t);default:throw new Error(`unhandled type ${o} for property ${e}`)}}(n,e,...t);return this.addController(i)}addCanvas(n){return this.addController(new U(n))}addColor(n,e,...t){return this.addController(new pn(n,e,...t))}addDivider(){return this.addController(new mn)}addFolder(n){return this.addController(new yn(n))}addLabel(n){return this.addController(new fn(n))}}return class extends yn{constructor(n={}){super("Controls","muigui-root"),n instanceof HTMLElement&&(n={parent:n});const{autoPlace:e=!0,width:t,title:i="Controls",injectStyles:o=!0}=n;let{parent:r}=n;o&&!vn&&(vn=!0,(document.head||document.documentElement).appendChild(xn),xn.textContent='\n.muigui {\n  --width: 250px;\n  --label-width: 45%;\n  --number-width: 40%;\n\n  --bg-color: #222222;\n  --color: #dddddd;\n  --value-color: #43e5f7;\n  --value-bg-color: #444444;\n  --disabled-color: #666666;\n  --menu-bg-color: #000000;\n  --menu-sep-color: #444444;\n  --hover-bg-color: #666666;\n  --focus-color: #88AAFF;\n  --range-color: #888888;\n  --invalid-color: #FF6666;\n  --selected-color: rgba(255, 255, 255, 0.3);\n\n  --button-bg-color: var(--value-bg-color);\n\n  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;\n  --font-size: 11px;\n  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;\n  --font-size-mono: 11px;\n\n  --range-left-color: var(--value-color);\n  --range-right-color: var(--value-bg-color);\n  --range-right-hover-color: var(--hover-bg-color);\n  --line-height: 1.7em;\n  --border-radius: 0px;\n\n  width: var(--width);\n  color: var(--color);\n  background-color: var(--bg-color);\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  box-sizing: border-box;\n}\n.muigui * {\n  box-sizing: inherit;\n}\n\n.muigui-invalid-value {\n  background-color: red !important;\n  color: white !important;\n}\n\n.muigui-grid {\n  display: grid;\n}\n.muigui-rows {\n  display: flex;\n  flex-direction: column;\n\n  min-height: 20px;\n  border: 2px solid red;\n}\n.muigui-columns {\n  display: flex;\n  flex-direction: row;\n\n  height: 20px;\n  border: 2px solid green;\n}\n.muigui-rows>*,\n.muigui-columns>* {\n  flex: 1 1 auto;\n  align-items: stretch;\n  min-height: 0;\n  min-width: 0;\n}\n\n.muigui-row {\n  border: 2px solid yellow;\n  min-height: 10px\n}\n.muigui-column {\n  border: 2px solid lightgreen;\n}\n\n/* -------- */\n\n.muigui-show { /* */ }\n.muigui-hide { \n  display: none !important;\n}\n.muigui-disabled {\n  pointer-events: none;\n  --color: var(--disabled-color) !important;\n  --value-color: var(--disabled-color) !important;\n  --range-left-color: var(--disabled-color) !important;\n}\n\n.muigui canvas,\n.muigui svg {\n  display: block;\n  border-radius: var(--border-radius);\n}\n.muigui canvas {\n  background-color: var(--value-bg-color);\n}\n\n.muigui-controller {\n  min-width: 0;\n  min-height: var(--line-height);\n}\n.muigui-root,\n.muigui-menu {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  user-select: none;\n  height: fit-content;\n  margin: 0;\n  padding-bottom: 0.1em;\n  border-radius: var(--border-radius);\n}\n.muigui-menu {\n  border-bottom: 1px solid var(--menu-sep-color);\n}\n\n.muigui-root>button:nth-child(1),\n.muigui-menu>button:nth-child(1) {\n  border-top: 1px solid var(--menu-sep-color);\n  border-bottom: 1px solid var(--menu-sep-color);\n  position: relative;\n  text-align: left;\n  color: var(--color);\n  background-color: var(--menu-bg-color);\n  min-height: var(--line-height);\n  padding-top: 0.2em;\n  padding-bottom: 0.2em;\n  cursor: pointer;\n  border-radius: var(--border-radius);\n}\n.muigui-root>div:nth-child(2),\n.muigui-menu>div:nth-child(2) {\n  flex: 1 1 auto;\n}\n\n.muigui-controller {\n  margin-left: 0.2em;\n  margin-right: 0.2em;\n}\n.muigui-root.muigui-controller,\n.muigui-menu.muigui-controller {\n  margin-left: 0;\n  margin-right: 0;\n}\n.muigui-controller>*:nth-child(1) {\n  flex: 1 0 var(--label-width);\n  min-width: 0;\n  white-space: pre;\n}\n.muigui-controller>label:nth-child(1) {\n  place-content: center start;\n  display: inline-grid;\n  overflow: hidden;\n}\n.muigui-controller>*:nth-child(2) {\n  flex: 1 1 75%;\n  min-width: 0;\n}\n\n/* -----------------------------------------\n  a label controller is  [[label][value]]\n*/\n\n.muigui-label-controller {\n  display: flex;\n  margin: 0.4em 0 0.4em 0;\n  word-wrap: initial;\n  align-items: stretch;\n}\n\n.muigui-value {\n  display: flex;\n  align-items: stretch;\n}\n.muigui-value>* {\n  flex: 1 1 auto;\n  min-width: 0;\n}\n.muigui-value>*:nth-child(1) {\n  flex: 1 1 calc(100% - var(--number-width));\n}\n.muigui-value>*:nth-child(2) {\n  flex: 1 1 var(--number-width);\n  margin-left: 0.2em;\n}\n\n/* fix! */\n.muigui-open>button>label::before,\n.muigui-closed>button>label::before {\n  width: 1.25em;\n  height: var(--line-height);\n  display: inline-grid;\n  place-content: center start;\n  pointer-events: none;\n}\n.muigui-open>button>label::before {\n  content: "ⓧ"; /*"▼";*/\n}\n.muigui-closed>button>label::before {\n  content: "⨁"; /*"▶";*/\n}\n.muigui-open>*:nth-child(2) {\n  transition: max-height 0.2s ease-out,\n              opacity 0.5s ease-out;\n  max-height: 100vh;\n  overflow: auto;\n  opacity: 1;\n}\n\n.muigui-closed>*:nth-child(2) {\n  transition: max-height 0.2s ease-out,\n              opacity 1s;\n  max-height: 0;\n  opacity: 0;\n  overflow: hidden;\n}\n\n/* ---- popdown ---- */\n\n.muigui-pop-down-top {\n  display: flex;\n}\n/* fix? */\n.muigui-value>*:nth-child(1).muigui-pop-down-top {\n  flex: 0;\n}\n.muigui-pop-down-bottom {\n\n}\n\n.muigui-pop-down-values {\n  min-width: 0;\n  display: flex;\n}\n.muigui-pop-down-values>* {\n  flex: 1 1 auto;\n  min-width: 0;\n}\n\n.muigui-value.muigui-pop-down-controller {\n  flex-direction: column;\n}\n\n.muigui-pop-down-top input[type=checkbox] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: auto;\n  color: var(--value-color);\n  background-color: var(--value-bg-color);\n  cursor: pointer;\n\n  display: grid;\n  place-content: center;\n  margin: 0;\n  font: inherit;\n  color: currentColor;\n  width: 1.7em;\n  height: 1.7em;\n  transform: translateY(-0.075em);\n}\n\n.muigui-pop-down-top input[type=checkbox]::before {\n  content: "+";\n  display: grid;\n  place-content: center;\n  border-radius: calc(var(--border-radius) + 2px);\n  border-left: 1px solid rgba(255,255,255,0.3);\n  border-top: 1px solid rgba(255,255,255,0.3);\n  border-bottom: 1px solid rgba(0,0,0,0.2);\n  border-right: 1px solid rgba(0,0,0,0.2);\n  background-color: var(--range-color);\n  color: var(--value-bg-color);\n  width: calc(var(--line-height) - 4px);\n  height: calc(var(--line-height) - 4px);\n}\n\n.muigui-pop-down-top input[type=checkbox]:checked::before {\n  content: "Ｘ";\n}\n\n\n/* ---- select ---- */\n\n.muigui select,\n.muigui option,\n.muigui input,\n.muigui button {\n  color: var(--value-color);\n  background-color: var(--value-bg-color);\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  border: none;\n  margin: 0;\n  border-radius: var(--border-radius);\n}\n.muigui select {\n  appearance: none;\n  margin: 0;\n  margin-left: 0; /*?*/\n  overflow: hidden; /* Safari */\n}\n\n.muigui select:focus,\n.muigui input:focus,\n.muigui button:focus {\n  outline: 1px solid var(--focus-color);\n}\n\n.muigui select:hover,\n.muigui option:hover,\n.muigui input:hover,\n.muigui button:hover {\n  background-color: var(--hover-bg-color);  \n}\n\n/* ------ [ label ] ------ */\n\n.muigui-label {\n  border-top: 1px solid var(--menu-sep-color);\n  border-bottom: 1px solid var(--menu-sep-color);\n  padding-top: 0.4em;\n  padding-bottom: 0.3em;\n  place-content: center start;\n  background-color: var(--menu-bg-color);\n  white-space: pre;\n  border-radius: var(--border-radius);\n}\n\n/* ------ [ divider] ------ */\n\n.muigui-divider {\n    min-height: 6px;\n    border-top: 2px solid var(--menu-sep-color);\n    margin-top: 6px;\n}\n\n/* ------ [ button ] ------ */\n\n.muigui-button {\n  display: grid;\n\n}\n.muigui-button button {\n  border: none;\n  color: var(--value-color);\n  background-color: var(--button-bg-color);\n  cursor: pointer;\n  place-content: center center;\n}\n\n/* ------ [ color ] ------ */\n\n.muigui-color>div {\n  overflow: hidden;\n  position: relative;\n  margin-left: 0;\n  margin-right: 0; /* why? */\n  max-width: var(--line-height);\n  border-radius: var(--border-radius);\n}\n\n.muigui-color>div:focus-within {\n  outline: 1px solid var(--focus-color);\n}\n\n.muigui-color input[type=color] {\n  border: none;\n  padding: 0;\n  background: inherit;\n  cursor: pointer;\n  position: absolute;\n  width: 200%;\n  left: -10px;\n  top: -10px;\n  height: 200%;\n}\n.muigui-disabled canvas,\n.muigui-disabled svg,\n.muigui-disabled img,\n.muigui-disabled .muigui-color input[type=color] {\n  opacity: 0.2;\n}\n\n/* ------ [ checkbox ] ------ */\n\n.muigui-checkbox>label:nth-child(2) {\n  display: grid;\n  place-content: center start;\n  margin: 0;\n}\n\n.muigui-checkbox input[type=checkbox] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: auto;\n  color: var(--value-color);\n  background-color: var(--value-bg-color);\n  cursor: pointer;\n\n  display: grid;\n  place-content: center;\n  margin: 0;\n  font: inherit;\n  color: currentColor;\n  width: 1.7em;\n  height: 1.7em;\n  transform: translateY(-0.075em);\n}\n\n.muigui-checkbox input[type=checkbox]::before {\n  content: "";\n  color: var(--value-color);\n  display: grid;\n  place-content: center;\n}\n\n.muigui-checkbox input[type=checkbox]:checked::before {\n  content: "✔";\n}\n\n.muigui input[type=number]::-webkit-inner-spin-button, \n.muigui input[type=number]::-webkit-outer-spin-button { \n  -webkit-appearance: none;\n  appearance: none;\n  margin: 0; \n}\n.muigui input[type=number] {\n  -moz-appearance: textfield;\n}\n\n/* ------ [ radio grid ] ------ */\n\n.muigui-radio-grid>div {\n  display: grid;\n  gap: 2px;\n}\n\n.muigui-radio-grid input {\n  appearance: none;\n  display: none;\n}\n\n.muigui-radio-grid button {\n  color: var(--color);\n  width: 100%;\n  text-align: left;\n}\n\n.muigui-radio-grid input:checked + button {\n  color: var(--value-color);\n  background-color: var(--selected-color);\n}\n\n/* ------ [ color-chooser ] ------ */\n\n.muigui-color-chooser-cursor {\n  stroke-width: 1px;\n  stroke: white;\n  fill: none;\n}\n.muigui-color-chooser-circle {\n  stroke-width: 1px;\n  stroke: white;\n  fill: none;\n}\n\n\n/* ------ [ vec2 ] ------ */\n\n.muigui-vec2 svg {\n  background-color: var(--value-bg-color);\n}\n\n.muigui-vec2-axis {\n  stroke: 1px;\n  stroke: var(--focus-color);\n}\n\n.muigui-vec2-line {\n  stroke-width: 1px;\n  stroke: var(--value-color);\n  fill: var(--value-color);\n}\n\n/* ------ [ direction ] ------ */\n\n.muigui-direction svg {\n  background-color: rgba(0,0,0,0.2);\n}\n\n.muigui-direction:focus-within svg {\n  outline: none;\n}\n.muigui-direction-range {\n  fill: var(--value-bg-color);\n}\n.muigui-direction svg:focus {\n  outline: none;\n}\n.muigui-direction svg:focus .muigui-direction-range {\n  stroke-width: 0.5px;\n  stroke: var(--focus-color);\n}\n\n.muigui-direction-arrow {\n  fill: var(--value-color);\n}\n\n/* ------ [ slider ] ------ */\n\n.muigui-slider>div {\n  display: flex;\n  align-items: stretch;\n  height: var(--line-height);\n}\n.muigui-slider svg {\n  flex: 1 1 auto;\n}\n.muigui-slider .muigui-slider-up #muigui-orientation {\n  transform: scale(1, -1) translateY(-100%);\n}\n\n.muigui-slider .muigui-slider-up #muigui-number-orientation {\n  transform: scale(1,-1);\n}\n\n.muigui-ticks {\n  stroke: var(--range-color);\n}\n.muigui-thicks {\n  stroke: var(--color);\n  stroke-width: 2px;\n}\n.muigui-svg-text {\n  fill: var(--color);\n  font-size: 7px;\n}\n.muigui-mark {\n  fill: var(--value-color);\n}\n\n/* ------ [ range ] ------ */\n\n\n.muigui-range input[type=range] {\n  -webkit-appearance: none;\n  appearance: none;\n  background-color: transparent;\n}\n\n.muigui-range input[type=range]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  border-radius: calc(var(--border-radius) + 2px);\n  border-left: 1px solid rgba(255,255,255,0.3);\n  border-top: 1px solid rgba(255,255,255,0.3);\n  border-bottom: 1px solid rgba(0,0,0,0.2);\n  border-right: 1px solid rgba(0,0,0,0.2);\n  background-color: var(--range-color);\n  margin-top: calc((var(--line-height) - 2px) / -2);\n  width: calc(var(--line-height) - 2px);\n  height: calc(var(--line-height) - 2px);\n}\n\n.muigui-range input[type=range]::-webkit-slider-runnable-track {\n  -webkit-appearance: none;\n  appearance: none;\n  border: 1px solid var(--menu-sep-color);\n  height: 2px;\n}\n\n\n/* dat.gui style - doesn\'t work on Safari iOS */\n\n/*\n.muigui-range input[type=range] {\n  cursor: ew-resize;\n  overflow: hidden;\n}\n\n.muigui-range input[type=range] {\n  -webkit-appearance: none;\n  appearance: none;\n  background-color: var(--range-right-color);\n  margin: 0;\n}\n.muigui-range input[type=range]:hover {\n  background-color: var(--range-right-hover-color);\n}\n\n.muigui-range input[type=range]::-webkit-slider-runnable-track {\n  -webkit-appearance: none;\n  appearance: none;\n  height: max-content;\n  color: var(--range-left-color);\n  margin-top: -1px;\n}\n\n.muigui-range input[type=range]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 0px;\n  height: max-content;\n  box-shadow: -1000px 0 0 1000px var(--range-left-color);\n}\n*/\n\n/* FF */\n/*\n.muigui-range input[type=range]::-moz-slider-progress {\n  background-color: var(--range-left-color); \n}\n.muigui-range input[type=range]::-moz-slider-thumb {\n  height: max-content;\n  width: 0;\n  border: none;\n  box-shadow: -1000px 0 0 1000px var(--range-left-color);\n  box-sizing: border-box;\n}\n*/\n\n/* ---------------------------------------------------------- */\n\n/* needs to be at bottom to take precedence */\n.muigui-auto-place {\n  max-height: 100%;\n  position: fixed;\n  top: 0;\n  right: 15px;\n  z-index: 100001;\n}\n\n'),t&&(this.domElement.style.width=/^\d+$/.test(t)?`${t}px`:t),void 0===r&&e&&(r=document.body,this.domElement.classList.add("muigui-auto-place")),r&&r.appendChild(this.domElement),i&&this.title(i),this.domElement.classList.add("muigui")}}}));
